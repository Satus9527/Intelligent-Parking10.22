# 软件项目详细设计讲义

## 一、课程导入：认识详细设计

### 1. 软件开发生命周期定位

软件项目开发遵循固定流程：需求分析→概要设计→详细设计→编码实施→测试→产品提交→维护。其中，详细设计是承上启下的核心环节 —— 承接概要设计的 “模块框架”，输出可直接指导编码的 “具体方案”，解决 “模块内部怎么做” 的问题。

### 2. 为什么需要详细设计？

• 避免开发混乱：若直接跳过详细设计编码，易出现 “多人开发逻辑不一致”“后期修改牵一发而动全身” 等问题。

• 降低沟通成本：用标准化文档 / 工具明确设计逻辑，让开发、测试、产品人员理解无歧义。

## 二、详细设计的核心内容

详细设计需明确三类关键信息，为编码提供直接依据：

1. 构件（模块）描述

定义模块的输入参数、输出结果、功能边界及与其他模块的交互规则。

示例：“报表模块” 需明确 “输入：部门 ID；输出：部门工程师工作量报表；交互：调用员工信息模块获取工程师基础数据”。

2. 算法描述

用标准化工具（如流程图、N-S 图）明确模块内部的执行逻辑（含顺序、选择、循环关系）。

示例：“登录模块” 的算法逻辑为 “接收账号密码→调用数据层查询用户→验证密码→返回登录成功 / 失败结果”。

3. 数据描述

定义模块处理的数据结构（如类属性、数组、数据库字段）及数据存储 / 传递规则。

示例：“User 类” 包含userName（String，用户名）、password（String，加密存储）、position（String，用户身份）等属性。

## 三、详细设计的核心工具

工具的核心作用是 “可视化、标准化” 设计逻辑，常用工具及对比如下：




|工具类型|核心用途|示例场景|优缺点总结|
|---|---|---|---|
|程序流程图|直观展示 “顺序、选择、循环” 基础逻辑|报表模块中 “用户选择操作→计算工作量→显示报表” 的步骤|优点：易懂；缺点：易出现随意跳转（箭头交叉）|
|N-S 图（盒图）|消除跳转，用 “盒子嵌套” 实现结构化逻辑|求 A、B、C 最大值时 “判断 A>B→判断 C>max” 的嵌套逻辑|优点：严谨；缺点：嵌套过深时可读性下降|
|决策表（判定表）|处理多条件组合的复杂逻辑|基于 “a=b？”“a=c？”“b=c？” 判断三角形类型（等腰 / 等边 / 不等边）|优点：清晰；缺点：条件过多时表格庞大|
|PDL（伪代码）|用 “类代码语法” 描述逻辑，衔接设计与编码|IF loginSuccess THEN return "SUCCESS" ELSE return "ERROR"|优点：贴近编码；缺点：可视化差|

## 四、详细设计的主流方法

根据软件设计范式，分为三类核心方法，适配不同开发场景：

### 1. 结构化详细设计（面向过程）

• 核心思想：以 “模块 / 过程” 为核心，将程序拆分为 “输入→处理→输出” 的线性流程，适合传统结构化开发（如 C 语言项目）。

• 核心方法：

◦ Jackson 方法：通过 “数据结构→程序结构” 映射设计，步骤为：

ⅰ. 表示数据结构（如 “订单数据 = 订单头 + 订单明细列表”）；

ⅱ. 匹配输入 / 输出数据结构关系；

ⅲ. 确定程序模块划分；

ⅳ. 分配可执行操作（如 “验证订单金额”）。

◦ Warnier 方法：用层次化符号描述数据 / 程序结构，明确操作执行次数（如 “处理优惠信息” 执行 0 或 1 次）。

### 2. 面向对象详细设计

• 核心思想：以 “类 / 对象” 为核心，衔接面向对象分析（OOA）与编码（OOP），适合复杂系统（如 Java/Python 项目）。

• 核心设计内容：

◦ 类关系设计：明确关联（如 “PrintJob 类” 依赖 “Paper 类”）、继承（如 “Teacher 类” 继承 “User 类”）关系；

◦ 类的详细设计：细化类的属性与方法，示例 “PrintJob 类”（属性：numberOfPages、paperSize；方法：computeJobCost()（计算成本）、passJobtoPrinter()（提交打印））；

◦ 包的设计：按功能分层划分包（如com.buptsse.spm.action存控制层类，com.buptsse.spm.dao存数据层类），降低耦合。

• 案例：登录模块分层设计




|分层|核心职责|示例类 / 接口|
|---|---|---|
|表现层|用户交互（页面）|login.jsp（登录页面，显示错误提示）|
|控制层|接收请求→调用业务逻辑→返回结果|LoginAction.java（实现login()方法）|
|业务逻辑层|核心业务处理（验证账号密码）|IUserService.java（定义login()接口）|
|数据持久层|数据读写（与数据库交互）|IUserDao.java（定义findUser()接口）|
|域模型层|封装业务数据（实体类）|User.java（含userName、password属性）|

### 3. 敏捷化的整洁设计

• 核心思想：以 “快速迭代、持续优化” 为核心，适合敏捷开发（如 Scrum 项目）。

• 核心原则与方法：

◦ 整洁设计三规则：

ⅰ. 运行所有测试（确保设计不破坏现有功能）；

ⅱ. 持续重构（优化代码结构，合并重复逻辑）；

ⅲ. 不可重复（避免冗余设计，降低维护成本）。

◦ 基于 TDD 的设计（测试驱动设计）：

ⅰ. 先写 “失败的单元测试”（如测试 “获取地震日期” 返回空）；

ⅱ. 写 “刚好让测试通过的产品代码”（如实现getDate()返回指定日期）；

ⅲ. 测试用例直接作为设计输出，衔接测试与开发。

## 五、核心总结

详细设计的本质是 “桥梁”，关键目标有三个：

1. 无歧义：通过标准化工具（如 N-S 图、决策表）让团队理解一致；

2. 可落地：设计细节足够具体，开发人员可直接编码实现；

3. 易维护：通过适配场景的设计方法（结构化 / OOP / 敏捷），降低后续修改成本。

