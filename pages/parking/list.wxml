<!--pages/parking/list.wxml-->
<view class="container">
  <!-- 标题栏 -->
  <view class="title">附近停车场</view>

  <!-- 加载中 -->
  <view wx:if="{{loading}}" class="loading">
    <view class="loading-spinner"></view>
    <text>加载中...</text>
  </view>

  <!-- 错误提示 -->
  <view wx:if="{{error && !loading}}" class="error">
    <text>{{errorMsg}}</text>
    <button bindtap="retryGetLocation">重试</button>
  </view>

  <!-- 停车场列表（数据渲染） -->
  <view wx:if="{{!loading && !error && parkingList.length > 0}}" class="parking-list">
    <view wx:for="{{parkingList}}" wx:key="id" class="parking-item" bindtap="goToDetail" data-id="{{item.id}}">
      <!-- 停车场名称 -->
      <view class="parking-name">{{item.name || '停车场'}}</view>
      <!-- 距离和可用车位 -->
      <view class="parking-info">
        <text>距离 {{item.distance || 0}} 米</text>
        <text class="available">可用车位：{{item.availableSpaces || 0}}</text>
      </view>
      <!-- 地址 -->
      <view class="parking-address">{{item.address || '地址不详'}}</view>
    </view>
  </view>

  <!-- 无数据提示 -->
  <view wx:if="{{!loading && !error && parkingList.length === 0}}" class="empty">
    <text>附近暂无停车场</text>
  </view>
</view>