# 智能停车场系统数据库初始化指南

## 问题分析

根据之前的错误信息，我们遇到了以下主要问题：

1. **数据库认证失败**：`ERROR 1045 (28000): Access denied for user 'parking_admin'@'localhost'`
2. **编码问题**：批处理脚本执行时出现乱码
3. **脚本兼容性问题**：之前创建的脚本可能存在兼容性问题

## 解决方案

我已经创建了两个新文件来简化数据库初始化过程：

1. **setup_database.bat** - 可配置的批处理脚本
2. **setup_database.sql** - 完整的SQL初始化文件

## 使用方法

### 方法一：使用批处理脚本（推荐）

1. 使用文本编辑器（如记事本）打开 `setup_database.bat`
2. 修改以下变量以匹配您的MySQL配置：
   ```
   set DB_USER=root       // MySQL用户名
   set DB_PASS=           // MySQL密码，如果没有密码则保留为空
   set DB_NAME=parking_db // 数据库名称
   ```
3. 保存文件并双击运行 `setup_database.bat`
4. 脚本会自动：
   - 检查MySQL是否可用
   - 创建数据库（如果不存在）
   - 创建测试表
   - 显示操作结果

### 方法二：手动执行SQL文件

1. 确保您的MySQL服务正在运行
2. 打开命令提示符（CMD）
3. 执行以下命令创建数据库：
   ```
   mysql -u[用户名] -p[密码] -e "CREATE DATABASE IF NOT EXISTS parking_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
   ```
4. 执行SQL脚本：
   ```
   mysql -u[用户名] -p[密码] parking_db < setup_database.sql
   ```

## 常见问题解决

### MySQL服务未启动

1. 在Windows上，按 `Win+R` 打开运行对话框
2. 输入 `services.msc` 并按回车
3. 找到 `MySQL` 服务
4. 右键点击并选择 "启动"

### 找不到MySQL命令

1. 确认MySQL已正确安装
2. 将MySQL的bin目录添加到系统PATH环境变量
3. 重启命令提示符

### 连接被拒绝

1. 检查MySQL服务是否正在运行
2. 确认用户名和密码是否正确
3. 确认用户有足够的权限创建数据库和表

## 验证数据库

初始化完成后，您可以使用以下命令验证数据库：

```
mysql -u[用户名] -p[密码] parking_db -e "SHOW TABLES; SELECT * FROM parking_lot;"
```

## 注意事项

- 本脚本默认使用root用户，如有安全顾虑请创建专用数据库用户
- 在生产环境中，请确保使用强密码并限制数据库访问权限
- 所有表都使用utf8mb4字符集，确保支持中文和其他特殊字符

如果您在使用过程中遇到任何问题，请检查错误信息并按照提示操作。